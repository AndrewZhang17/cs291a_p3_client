(this.webpackJsonpchat_client=this.webpackJsonpchat_client||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(0),r=n(1),c=n.n(r),a=n(7),i=n.n(a),u=(n(13),n(3)),o=n(2);n.p,n(14),n(15);var j=function(e){var t=Object(r.useState)(""),n=Object(o.a)(t,2),c=n[0],a=n[1];return Object(s.jsx)("div",{className:"Compose",children:Object(s.jsxs)("form",{className:"form",onSubmit:function(t){t.preventDefault();var n=new FormData;n.append("message",c),fetch(e.server+"/message",{method:"POST",headers:{Authorization:"Bearer "+e.token},body:n}).then((function(e){201===e.status?console.log(e):403===e.status?window.alert("Token not valid."):422===e.status&&window.alert("Empty message")})),a("")},children:[Object(s.jsx)("input",{className:"msgInput",type:"text",id:"msgInput",value:c,onChange:function(e){return a(e.target.value)}}),Object(s.jsx)("input",{className:"submit",type:"submit",value:"Send"})]})})};n(16);var d=function(e){return console.log(e.users),Object(s.jsx)("div",{className:"UserList",children:Object(s.jsxs)("div",{className:"UserListInner",children:[Object(s.jsx)("h1",{children:"Users"}),Object(s.jsx)("ul",{children:e.users.map((function(e){return Object(s.jsx)("li",{children:e},e)}))})]})})};n(17);var l=function(e){function t(e){return Object(s.jsxs)("p",{className:"timeStamp",children:[new Date(1e3*parseFloat(e)).toLocaleString("en-US",{hour12:!1,month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",year:"numeric"})," "]})}return Object(s.jsxs)("div",{className:"MessageList",children:[Object(s.jsx)("h1",{children:"Messages"}),Object(s.jsx)("ul",{children:e.events.map((function(e){var n=JSON.parse(e.data),r=e.type;return"ServerStatus"===r?Object(s.jsxs)("li",{children:[" ",t(n.created),Object(s.jsxs)("p",{className:"StatusMessage",children:[n.status," "]})," "]},n.created):"Message"===r?Object(s.jsxs)("li",{children:[" ",t(n.created),Object(s.jsxs)("p",{children:[" ",n.user,": ",n.message," "]}),"  "]},n.created):"Join"===r?Object(s.jsxs)("li",{children:[t(n.created),Object(s.jsxs)("p",{className:"JoinMessage",children:[" ",n.user," Joined!"]})]},n.created):"Part"===r?Object(s.jsxs)("li",{children:[t(n.created),Object(s.jsxs)("p",{className:"PartMessage",children:[n.user," Parted!"]})]},n.created):void 0}))}),function(){var e=Object(r.useRef)();return Object(r.useEffect)((function(){return e.current.scrollIntoView({behavior:"smooth"})})),Object(s.jsx)("div",{ref:e})}()]})};n(18);var b=function(e){var t=Object(r.useState)(""),n=Object(o.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(""),u=Object(o.a)(i,2),j=u[0],d=u[1],l=Object(r.useState)(""),b=Object(o.a)(l,2),O=b[0],f=b[1];return Object(s.jsx)("div",{className:"LoginForm",children:Object(s.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n=new FormData;n.append("username",j),n.append("password",O),fetch(c+"/login",{method:"POST",body:n}).then((function(t){201===t.status?t.json().then((function(t){return e.callback(t.token,c)})):403===t.status?window.alert("Incorrect username or password."):422===t.status&&window.alert("Username or password blank.")}))},children:[Object(s.jsx)("label",{htmlFor:"serverURL",children:"Chat URL:"}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{type:"text",id:"serverURL",value:c,onChange:function(e){return a(e.target.value)}}),Object(s.jsx)("br",{}),Object(s.jsx)("label",{htmlFor:"username",children:"Username:"}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{type:"text",id:"username",value:j,onChange:function(e){return d(e.target.value)}}),Object(s.jsx)("br",{}),Object(s.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{type:"password",id:"password",value:O,onChange:function(e){return f(e.target.value)}}),Object(s.jsx)("br",{}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{type:"submit",value:"Log in"})]})})};var O=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),i=Object(o.a)(a,2),O=i[0],f=i[1],h=Object(r.useState)([]),m=Object(o.a)(h,2),v=m[0],p=m[1],x=Object(r.useState)(""),g=Object(o.a)(x,2),S=g[0],w=g[1],N=Object(r.useState)(!1),L=Object(o.a)(N,2),y=L[0],C=L[1];return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(d,{users:O}),Object(s.jsxs)("div",{className:"MessageComposeContainer",children:[Object(s.jsx)(l,{events:v}),Object(s.jsx)(j,{token:n,server:S})]}),!y&&Object(s.jsx)(b,{callback:function(e,t){c(e),w(t);var n=new EventSource(t+"/stream/"+e);n.addEventListener("Users",(function(e){f(JSON.parse(e.data).users)})),n.addEventListener("Join",(function(e){var t=JSON.parse(e.data).user;console.log("IN JOIN"),f((function(e){return e.filter((function(e){return e!==t}))})),f((function(e){return[].concat(Object(u.a)(e),[t])})),p((function(t){return[].concat(Object(u.a)(t),[e])}))})),n.addEventListener("Part",(function(e){var t=JSON.parse(e.data).user;f((function(e){return e.filter((function(e){return e!==t}))})),p((function(t){return[].concat(Object(u.a)(t),[e])}))})),n.addEventListener("Disconnect",(function(e){n.close(),C(!1)})),n.addEventListener("ServerStatus",(function(e){p((function(t){return[].concat(Object(u.a)(t),[e])}))})),n.addEventListener("Message",(function(e){p((function(t){return[].concat(Object(u.a)(t),[e])}))})),C(!0)}})]})},f=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),s(e),r(e),c(e),a(e)}))};i.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(O,{})}),document.getElementById("root")),f()}],[[19,1,2]]]);
//# sourceMappingURL=main.e46b8f7e.chunk.js.map